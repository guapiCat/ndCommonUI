import{$ as R,a0 as x,g as T,W as H,y as M,_ as I,s as D,h as W,t as F,o as g,c as w,d as i,n as C,j as h,B as N,v as y,k as E,F as q,E as U,f as j,l as z,P as G,Q,r as $,b as J}from"./app-df2347b2.js";import{s as X}from"./index-097cfb71.js";import"./SvgIcon-8156b278.js";import"./SvgIcon.vue_vue_type_style_index_0_scoped_28cca203_lang-4ed993c7.js";var K;const A=typeof window<"u",Y=t=>typeof t=="string",S=()=>{};A&&((K=window==null?void 0:window.navigator)!=null&&K.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Z(t){return R()?(x(t),!0):!1}function b(t){var o;const e=M(t);return(o=e==null?void 0:e.$el)!=null?o:e}const V=A?window:void 0;function v(...t){let o,e,s,r;if(Y(t[0])?([e,s,r]=t,o=V):[o,e,s,r]=t,!o)return S;let c=S;const n=H(()=>b(o),p=>{c(),p&&(p.addEventListener(e,s,r),c=()=>{p.removeEventListener(e,s,r),c=S})},{immediate:!0,flush:"post"}),u=()=>{n(),c()};return Z(u),u}function ee(t,o,e={}){const{window:s=V,ignore:r,capture:c=!0,detectIframe:n=!1}=e;if(!s)return;const u=T(!0);let p;const f=a=>{s.clearTimeout(p);const l=b(t),m=a.composedPath();!l||l===a.target||m.includes(l)||!u.value||r&&r.length>0&&r.some(B=>{const _=b(B);return _&&(a.target===_||m.includes(_))})||o(a)},k=[v(s,"click",f,{passive:!0,capture:c}),v(s,"pointerdown",a=>{const l=b(t);u.value=!!l&&!a.composedPath().includes(l)},{passive:!0}),v(s,"pointerup",a=>{if(a.button===0){const l=a.composedPath();a.composedPath=()=>l,p=s.setTimeout(()=>f(a),50)}},{passive:!0}),n&&v(s,"blur",a=>{var l;const m=b(t);((l=document.activeElement)==null?void 0:l.tagName)==="IFRAME"&&!(m!=null&&m.contains(document.activeElement))&&o(a)})].filter(Boolean);return()=>k.forEach(a=>a())}const O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},P="__vueuse_ssr_handlers__";O[P]=O[P]||{};var L;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(L||(L={}));const te="/docs/assets/status-loading-cee9076f.gif";const oe={props:{placeholder:{type:String,default:"请输入名称(至少三个字)"},tipInfo:{type:String,default:"如以下选项没有您需要的数据，请继续输入更多文字查找"},httpReq:{type:Function,default:null},httpFn:{type:Function,default:()=>Promise.resolve([])},prop:{type:Object,default:{id:"id",label:"label"}},paramKey:{type:String,default:""},moreParam:{type:Object,default:{}},formPlaceholder:{type:String,default:"请输入"},inputMax:{type:Number,default:25},propClass:{type:String,default:""},maxHeight:{type:String,default:0},formTitle:{type:[String,Number],default:"请输入名称"}},emits:["choose","search"],setup(t,{emit:o}){const e=D({showOption:!1,showLoading:!1,showEle:!1,keyword:"",companyArr:[],propKey:{id:"id",label:"label"},dialogVisible:!1,customName:"",companyShodow:!1,form:{id:0,label:""},isEditName:!1,focusName:!1,userInputStatus:!1,inputStatus:!1,timer:null}),s=T(),r=function(){!e.showEle&&e.keyword.length>=3?(f(),e.showEle=!0):(e.showEle=!1,e.companyArr=[])},c=()=>{e.timer&&(clearTimeout(e.timer),e.timer=null),e.keyword.length>3?e.timer=setTimeout(()=>{console.log("search"),e.showEle=!0,e.showOption=!0,f()},400):(e.showEle=!1,e.showOption=!1)},n=function(){if(e.form.label==""){X({message:"请输入内容",position:"mid"});return}e.isEditName=!0,e.focusName=!0,e.showEle=!1,e.showOption=!1,e.keyword=e.form.label,e.dialogVisible=!1,e.companyShodow=!1,o("choose",{[e.prop.id]:"",[e.prop.label]:e.form.label})},u=function(d){d[e.propKey.id]==0?(e.form.label="",e.form.id=0,e.dialogVisible=!0,e.companyShodow=!0,e.showEle=!1):(e.keyword=d[e.propKey.label],e.focusName=!0,e.showEle=!1,o("choose",d))},p=d=>{e.keyword.length>=3&&(e.showEle=!0);let a=[];return d.forEach((l,m)=>{a.push({...l,[e.propKey.id]:l[e.propKey.id],[e.propKey.label]:l[e.propKey.label]})}),a.push({[e.propKey.id]:0,[e.propKey.label]:"其他"}),a},f=async()=>{try{e.showLoading=!0;let d=[];if(t.httpReq){let a={[t.paramKey||"name"]:e.keyword};t.moreParam&&(a={...a,...t.moreParam});let l=await t.httpReq(a);e.showLoading=!1,(l.data.data?l.data.status.code:l.status.code)==1&&(d=l.data.data||l.data,e.companyArr=[],e.companyArr=p(d))}else d=await t.httpFn(e.keyword),e.showLoading=!1,e.companyArr=[],e.companyArr=p(d)}catch(d){console.log(d,"err"),e.showLoading=!1}};return W(()=>{e.propKey={...e.propKey,...t.prop},f(),ee(s,()=>{e.showEle=!1})}),{...F(e),tagOptions:r,chooseData:u,getData:f,inputChange:c,confirm:n,unitSelect:s}}},se=t=>(G("data-v-df963f5a"),t=t(),Q(),t),ne={class:"input-content data-formLst",ref:"unitSelect"},ae=["placeholder"],le={class:"unit-select"},ie=["onClick"],re={class:"unit-select",style:{display:"block"}},de=se(()=>i("div",{class:"unit-box"},[i("ul",{style:{display:"block"}},[i("img",{src:te,class:"pic-loading",width:"40"})])],-1)),ce=[de],ue={class:"form-dialog"},pe={class:"content"},fe=["placeholder","maxlength"],me={class:"btn"};function he(t,o,e,s,r,c){return g(),w("section",{class:z(`nd-select-business ${e.propClass}`)},[i("div",ne,[i("div",{class:"input",style:C(t.showLoading||t.showEle?"border-bottom-left-radius: 0;border-bottom-right-radius: 0;":"")},[h(i("input",{onInput:o[0]||(o[0]=(...n)=>s.inputChange&&s.inputChange(...n)),type:"text",placeholder:e.placeholder,"onUpdate:modelValue":o[1]||(o[1]=n=>t.keyword=n),maxlength:"25"},null,40,ae),[[N,t.keyword,void 0,{trim:!0}]]),h(i("a",{onClick:o[2]||(o[2]=(...n)=>s.tagOptions&&s.tagOptions(...n)),class:"input-arrow"},null,512),[[y,t.showOption]])],4),h(i("div",le,[i("div",{class:"unit-box",style:C(e.maxHeight?`max-height:${e.maxHeight}px!important`:"")},[h(i("div",{class:"select-ts"},E(e.tipInfo),513),[[y,t.showEle]]),(g(!0),w(q,null,U(t.companyArr,(n,u)=>(g(),w("ul",null,[(g(),w("li",{key:n[t.propKey.id],onClick:p=>s.chooseData(n)},E(n[t.propKey.label]),9,ie))]))),256))],4)],512),[[y,t.showEle]]),h(i("div",re,ce,512),[[y,t.showLoading]])],512),h(i("div",ue,[i("div",pe,[i("p",null,E(e.formTitle),1),h(i("input",{"onUpdate:modelValue":o[3]||(o[3]=n=>t.form.label=n),type:"text",placeholder:e.formPlaceholder,maxlength:e.inputMax},null,8,fe),[[N,t.form.label]]),j('<div class="ts-word">请输入单位</div>')]),i("div",me,[i("span",{onClick:o[4]||(o[4]=n=>{t.dialogVisible=!1,t.companyShodow=!1})},"取消"),i("span",{onClick:o[5]||(o[5]=(...n)=>s.confirm&&s.confirm(...n))},"确认")])],512),[[y,t.dialogVisible]])],2)}const ye=I(oe,[["render",he],["__scopeId","data-v-df963f5a"],["__file","nd-select-business.vue"]]);const ge={components:{ndSelectBusiness:ye},setup(){const t=D({arr:[{label:"上海新迪数字科技有限公司",id:1},{label:"上海新迪数字科技有限公司",id:5},{label:"上海新迪数字科技有限公司",id:6},{label:"上海新迪数字科技有限公司",id:7},{label:"杭州新迪数字科技有限公司杭州新迪数字科技有限公司",id:8},{label:"北京字节跳动科技有限公司",id:3},{label:"杭州阿里巴巴",id:4}]}),o=async r=>new Promise(c=>{let n=t.arr.filter(u=>u.label.includes(""));c(n)}),e=r=>{console.log(`🚀获取数据==${r}`)};return{...F(t),getData:o,chooseData:e}}},we={class:"nd-select-1"};function be(t,o,e,s,r,c){const n=$("nd-select-business");return g(),w("section",we,[J(n,{httpFn:s.getData,onChoose:s.chooseData,maxHeight:300},null,8,["httpFn","onChoose"])])}const ke=I(ge,[["render",be],["__file","nd-select-1.vue"]]);export{ke as default};
