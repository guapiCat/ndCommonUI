import{n as y,a as T}from"./nd-tab-922d2af5.js";import{_ as L,u as P,g as m,M as x,r as w,o as c,i as N,R as D,y as i,w as t,m as u,d as n,N as $,s as B,Z as I,c as g,b as r,F as C,E,j as H,k as S,P as M,Q as z}from"./app-df2347b2.js";const V={__name:"nd-pull-refresh",props:{loading:{type:Object,default:{isLoading:!1}},pullingText:{type:String,default:"下拉即可刷新..."},loosingText:{type:String,default:"释放即可刷新..."},loadingText:{type:String,default:"加载中..."},successText:{type:String},successDuration:{type:[Number,String],default:500},animationDuration:{type:[Number,String],default:300},headHeight:{type:[Number,String],default:50},pullDistance:{type:[Number,String]},disabled:{type:Boolean,default:!1},contentHeight:{type:[Number,String]},bottomOffset:{type:Number,default:0}},emits:["loadMore"],setup(o,{emit:_}){const e=o,s=P(),a=m(null);x(()=>{e.contentHeight&&(a.value.style.height=e.contentHeight+"px")});const f=()=>{x(()=>{if(a.value.scrollHeight-a.value.scrollTop-a.value.clientHeight<=e.bottomOffset){if(e.loading.isLoading)return!1;_("loadMore")}})};return(l,h)=>{const d=w("van-pull-refresh");return c(),N(d,$(l.$attrs,{modelValue:o.loading.isLoading,"onUpdate:modelValue":h[0]||(h[0]=v=>o.loading.isLoading=v),disabled:o.loading.isLoading||o.disabled}),D({default:t(()=>[n("div",{class:"nd-pull-refresh-box",ref_key:"ndPullRefreshBox",ref:a,onScroll:f},[u(l.$slots,"default",{},void 0,!0)],544)]),_:2},[i(s).normal?{name:"normal",fn:t(()=>[u(l.$slots,"normal",{},void 0,!0)]),key:"0"}:void 0,i(s).pulling?{name:"pulling",fn:t(()=>[u(l.$slots,"pulling",{},void 0,!0)]),key:"1"}:void 0,i(s).loosing?{name:"loosing",fn:t(()=>[u(l.$slots,"loosing",{},void 0,!0)]),key:"2"}:void 0,i(s).loading?{name:"loading",fn:t(()=>[u(l.$slots,"loading",{},void 0,!0)]),key:"3"}:void 0,i(s).success?{name:"success",fn:t(()=>[u(l.$slots,"success",{},void 0,!0)]),key:"4"}:void 0]),1040,["modelValue","disabled"])}}},b=L(V,[["__scopeId","data-v-33d26d57"],["__file","nd-pull-refresh.vue"]]);const p=o=>(M("data-v-49535fa8"),o=o(),z(),o),j={style:{width:"80%",margin:"10px auto","border-radius":"12px","background-color":"pink",height:"76px",display:"flex","flex-direction":"column",padding:"16px","box-sizing":"border-box",border:"1px solid #E5E5E5",position:"relative"}},O={class:"leftlazy"},U={key:0,class:"no-more"},A={key:1,class:"no-more"},F={class:"box"},G=p(()=>n("p",null,"啦啦啦",-1)),J=p(()=>n("p",null,"哈哈哈",-1)),Q=p(()=>n("p",null,"嘿嘿嘿",-1)),Z={class:"box"},q=p(()=>n("p",null,[n("b",null,"请将浏览器切换为移动端模式")],-1)),K=p(()=>n("p",null,[n("b",null,"然后将屏幕滑动到最顶部")],-1)),W={__name:"ndPullRefresh",setup(o){m(!1);const _=m(0),e=B({loading:{isLoading:!1},recordList:[],total:55,page:1,rows:10}),s=()=>{e.page++,setTimeout(()=>{f()},1e3)},a=d=>{},f=()=>{e.loading.isLoading=!1;for(let d=(e.page-1)*e.rows;d<e.page*e.rows;d++)if(e.recordList.length<e.total)e.recordList.push({convertStatus:d%9==0?5:2,extension:".stp",fileSize:"6.49M",modelCode:4579650710273,modelName:"模型"+d,thumbnailImgURL:"https://img1.baidu.com/it/u=3867310887,3679104461&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=500",typeImgSrc:"/images/fileType/Step.png",updateTime:"2023-03-24T17:38:30"});else return l.value=!0,!1};f();const l=m(!1),h=()=>{e.loading.isLoading=!0,f()};return(d,v)=>{const k=I("lazy");return c(),g("div",null,[r(i(T),null,{default:t(()=>[r(i(y),{title:"基础用法"},{default:t(()=>[r(b,{loading:e.loading,onRefresh:s,onChange:a,"content-height":"200","bottom-offset":20,onLoadMore:h},{default:t(()=>[n("ul",null,[(c(!0),g(C,null,E(e.recordList,(R,X)=>(c(),g("li",j,[H(n("img",O,null,512),[[k,R.thumbnailImgURL]])]))),256)),l.value?(c(),g("p",U,"没有更多了")):(c(),g("p",A,"下拉加载更多"))])]),_:1},8,["loading"])]),_:1}),r(i(y),{title:"成功提示"},{default:t(()=>[r(b,{loading:e.loading,successText:"刷新成功",onRefresh:s,onChange:a,style:{height:"360px"}},{default:t(()=>[n("div",F,[n("p",null,"刷新次数："+S(_.value),1)])]),_:1},8,["loading"])]),_:1}),r(i(y),{title:"自定义提示"},{default:t(()=>[r(b,{loading:e.loading,onRefresh:s,onChange:a,style:{height:"360px"}},{pulling:t(()=>[G]),loading:t(()=>[J]),loosing:t(()=>[Q]),default:t(()=>[n("div",Z,[n("p",null,"刷新次数："+S(_.value),1)])]),_:1},8,["loading"])]),_:1})]),_:1}),q,K])}}},te=L(W,[["__scopeId","data-v-49535fa8"],["__file","ndPullRefresh.vue"]]);export{te as default};
