import{n as L}from"./nd-popup-96875a5a.js";import{n as Q}from"./nd-button-75920eda.js";import{n as V}from"./nd-switch-1067aebd.js";import{n as c}from"./nd-cell-ad38709a.js";import{n as E,a as F}from"./nd-grid-item-f94f1523.js";import{n as v}from"./nd-picker-3250c4d2.js";import{_ as $,u as G,s as A,W as j,r as k,o as a,c as y,f as d,d as u,i as h,w as i,e as N,k as T,b as r,y as l,m as O,F as D,E as R,P as W,Q as H,h as J,x as K,t as X}from"./app-df2347b2.js";v.install=function(f){f.component(v.name,v)};const p=f=>(W("data-v-e5be75d6"),f=f(),H(),f),Y={class:"nd-sharing"},Z=p(()=>u("div",{class:"nd-s-topblank"},null,-1)),ee={class:"nd-s-infrastructure"},oe=p(()=>u("div",null,"有效期",-1)),te=p(()=>u("div",null,"浏览次数",-1)),ne=p(()=>u("div",null,"是否加密",-1)),se={key:3,class:"nd-s-advancedSetup"},ie=p(()=>u("div",null,"允许他人下载源文件",-1)),le=p(()=>u("div",null,"允许他人使用测量功能",-1)),ae=p(()=>u("div",null,"允许他人查看PMI",-1)),re=p(()=>u("div",null,"允许他人查看结构树",-1)),ue=p(()=>u("div",null,"允许他人查看自定义属性",-1)),de={class:"nd-s-options"},fe={key:1,class:"nd-s-options-conter"},he={__name:"nd-viewer-sharing",props:{shareConfig:{type:Object,default:{validdate:0,maxVisitNum:0,isPrivate:0,modelSettings:{isShowMeasure:!1,isShowPMI:!1,isShowStructureTree:!1,isShowStructureTreeProperty:!1,isAllowDownload:!1}}},subcontract:{type:Array,default:[{icon:"",title:"复制链接",key:"link"},{icon:"",title:"二维码",key:"qrcode"},{icon:"",title:"联系人",key:"contact"},{icon:"",title:"微信",key:"wx"},{icon:"",title:"QQ",key:"qq"},{icon:"",title:"朋友圈",key:"pyq"}]}},emits:["confirmShar","popChange"],setup(f,{emit:S}){const e=f,m=G(),t=A({validdateShow:!1,VisitNumShow:!1,PrivateShow:!1});A({validdate:0,maxVisitNum:0,isPrivate:0,modelSettings:{isShowMeasure:!1,isShowPMI:!1,isShowStructureTree:!1,isShowStructureTreeProperty:!1,isAllowDownload:!1}});const P=[{text:"永久有效",value:0},{text:"15天",value:15},{text:"7天",value:7},{text:"1天",value:1}],g=s=>{if(s==0)return"永久有效";if(s==15)return"15天";if(s==7)return"7天";if(s==1)return"1天"},w=({selectedOptions:s})=>{console.log("selectedOptions",s),t.validdateShow=!1,e.shareConfig.validdate=s[0].value},C=[{text:"不限次数",value:0},{text:"100次",value:100},{text:"10次",value:10},{text:"1次",value:1}],x=s=>{if(s==0)return"不限次数";if(s==100)return"100次";if(s==10)return"10次";if(s==1)return"1次"},_=({selectedOptions:s})=>{t.VisitNumShow=!1,e.shareConfig.maxVisitNum=s[0].value},I=[{text:"不加密",value:0},{text:"加密",value:1}],B=s=>s==0?"不加密":"加密",z=({selectedOptions:s})=>{t.PrivateShow=!1,e.shareConfig.isPrivate=s[0].value},q=s=>{S("confirmShar",s,e.shareConfig)};return j(()=>t,()=>{console.log("watch========",t);const s=t.validdateShow||t.VisitNumShow||t.PrivateShow;S("popChange",s)},{deep:!0}),(s,o)=>{const b=k("van-icon"),M=k("van-popup");return a(),y(D,null,[d(" 分享设置 "),u("div",Y,[Z,u("div",ee,[e.shareConfig.validdate!=null?(a(),h(l(c),{key:0},{title:i(()=>[oe]),value:i(()=>[u("div",{onClick:o[0]||(o[0]=n=>t.validdateShow=!0)},[N(T(g(e.shareConfig.validdate))+" ",1),r(b,{name:"arrow"})])]),_:1})):d("v-if",!0),e.shareConfig.maxVisitNum!=null?(a(),h(l(c),{key:1},{title:i(()=>[te]),value:i(()=>[u("div",{onClick:o[1]||(o[1]=n=>t.VisitNumShow=!0)},[N(T(x(e.shareConfig.maxVisitNum))+" ",1),r(b,{name:"arrow"})])]),_:1})):d("v-if",!0),e.shareConfig.isPrivate!=null?(a(),h(l(c),{key:2},{title:i(()=>[ne]),value:i(()=>[u("div",{onClick:o[2]||(o[2]=n=>t.PrivateShow=!0)},[N(T(B(e.shareConfig.isPrivate))+" ",1),r(b,{name:"arrow"})])]),_:1})):d("v-if",!0),e.shareConfig.modelSettings?(a(),y("div",se," 高级设置 ")):d("v-if",!0),e.shareConfig.modelSettings&&e.shareConfig.modelSettings.isAllowDownload!=null?(a(),h(l(c),{key:4},{title:i(()=>[ie]),value:i(()=>[r(l(V),{modelValue:e.shareConfig.modelSettings.isAllowDownload,size:"24px",onChange:o[3]||(o[3]=n=>{e.shareConfig.modelSettings.isAllowDownload=n})},null,8,["modelValue"])]),_:1})):d("v-if",!0),e.shareConfig.modelSettings&&e.shareConfig.modelSettings.isShowMeasure!=null?(a(),h(l(c),{key:5},{title:i(()=>[le]),value:i(()=>[r(l(V),{modelValue:e.shareConfig.modelSettings.isShowMeasure,size:"24px",onChange:o[4]||(o[4]=n=>{e.shareConfig.modelSettings.isShowMeasure=n})},null,8,["modelValue"])]),_:1})):d("v-if",!0),e.shareConfig.modelSettings&&e.shareConfig.modelSettings.isShowPMI!=null?(a(),h(l(c),{key:6},{title:i(()=>[ae]),value:i(()=>[r(l(V),{modelValue:e.shareConfig.modelSettings.isShowPMI,size:"24px",onChange:o[5]||(o[5]=n=>{e.shareConfig.modelSettings.isShowPMI=n})},null,8,["modelValue"])]),_:1})):d("v-if",!0),e.shareConfig.modelSettings&&e.shareConfig.modelSettings.isShowStructureTree!=null?(a(),h(l(c),{key:7},{title:i(()=>[re]),value:i(()=>[r(l(V),{modelValue:e.shareConfig.modelSettings.isShowStructureTree,size:"24px",onChange:o[6]||(o[6]=n=>{e.shareConfig.modelSettings.isShowStructureTree=n})},null,8,["modelValue"])]),_:1})):d("v-if",!0),e.shareConfig.modelSettings&&e.shareConfig.modelSettings.isShowStructureTreeProperty!=null?(a(),h(l(c),{key:8},{title:i(()=>[ue]),value:i(()=>[r(l(V),{modelValue:e.shareConfig.modelSettings.isShowStructureTreeProperty,size:"24px",onChange:o[7]||(o[7]=n=>{e.shareConfig.modelSettings.isShowStructureTreeProperty=n})},null,8,["modelValue"])]),_:1})):d("v-if",!0)]),u("div",de,[d(" 默认插槽 "),l(m).default?O(s.$slots,"default",{key:0},void 0,!0):(a(),y("div",fe,[r(l(F),{"column-num":e.subcontract.length==2?2:3,gutter:12},{default:i(()=>[(a(!0),y(D,null,R(e.subcontract,(n,U)=>(a(),h(l(E),{onClick:Se=>q(n),key:U,icon:n.icon,title:n.title,text:n.text},null,8,["onClick","icon","title","text"]))),128))]),_:1},8,["column-num"])]))])]),r(M,{show:t.validdateShow,"onUpdate:show":o[9]||(o[9]=n=>t.validdateShow=n),round:"",position:"bottom"},{default:i(()=>[t.validdateShow?(a(),h(l(v),{key:0,columns:P,onCancel:o[8]||(o[8]=n=>t.validdateShow=!1),onConfirm:w})):d("v-if",!0)]),_:1},8,["show"]),r(M,{show:t.VisitNumShow,"onUpdate:show":o[11]||(o[11]=n=>t.VisitNumShow=n),round:"",position:"bottom"},{default:i(()=>[t.VisitNumShow?(a(),h(l(v),{key:0,columns:C,onCancel:o[10]||(o[10]=n=>t.VisitNumShow=!1),onConfirm:_})):d("v-if",!0)]),_:1},8,["show"]),r(M,{show:t.PrivateShow,"onUpdate:show":o[13]||(o[13]=n=>t.PrivateShow=n),round:"",position:"bottom"},{default:i(()=>[t.PrivateShow?(a(),h(l(v),{key:0,columns:I,onCancel:o[12]||(o[12]=n=>t.PrivateShow=!1),onConfirm:z})):d("v-if",!0)]),_:1},8,["show"])],64)}}},me=$(he,[["__scopeId","data-v-e5be75d6"],["__file","nd-viewer-sharing.vue"]]);const pe={name:"",components:{ndAppPopup:L,ndAppButton:Q,ndViewerSharing:me},setup(f,S){const e=A({show:!1,shareConfig:{validdate:0,maxVisitNum:0,isPrivate:0,modelSettings:{isShowMeasure:!1,isShowPMI:!0,isShowStructureTree:!0,isShowStructureTreeProperty:!1,isAllowDownload:!0}}});J(()=>{}),K(()=>{});const m=()=>{e.show=!0},t=()=>{e.show=!1},P=(_,I)=>{console.log("shareConfig:",_),console.log("index:",I)},g=()=>{console.log("弹窗关闭")},w=()=>{console.log("点击关闭按钮")},C=_=>{console.log("bool====",_)};return{...X(e),openPop:m,closePop:t,close:g,clickCloseIcon:w,confirmShar:P,popChange:C}}};function ce(f,S,e,m,t,P){const g=k("nd-app-button"),w=k("ndViewerSharing",!0),C=k("nd-app-popup");return a(),y("div",null,[r(g,{onClick:m.openPop,type:"primary"},{default:i(()=>[N("打开设置弹层")]),_:1},8,["onClick"]),r(C,{style:{height:"588px"},modelValue:f.show,"onUpdate:modelValue":S[0]||(S[0]=x=>f.show=x),onClose:m.close,onClickCloseIcon:m.clickCloseIcon},{default:i(()=>[r(w,{onConfirmShar:m.confirmShar,onPopChange:m.popChange,shareConfig:f.shareConfig},null,8,["onConfirmShar","onPopChange","shareConfig"])]),_:1},8,["modelValue","onClose","onClickCloseIcon"])])}const ke=$(pe,[["render",ce],["__scopeId","data-v-e8e83ea9"],["__file","ndViewerSharing.vue"]]);export{ke as default};
