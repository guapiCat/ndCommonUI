import{_ as t,r as e,o,c,d as n,e as s,b as i,a}from"./app-df2347b2.js";const l="/docs/assets/image-20231129175611556-6ee3e98a.png",u="/docs/assets/image-20231129175946538-eafa753a.png",r="/docs/assets/企业微信截图_17012262401403-2ea8c7d7.png",k="/docs/assets/企业微信截图_17012527676451-cd1a0a58.png",d="/docs/assets/企业微信截图_17013111477460-c35a189d.png",v="/docs/assets/企业微信截图_17013098387060-a4d85efb.png",m="/docs/assets/企业微信截图_17013100991111-d9651155.png",b={},g=a(`<h2 id="如何进行资源分析" tabindex="-1"><a class="header-anchor" href="#如何进行资源分析" aria-hidden="true">#</a> 如何进行资源分析</h2><h3 id="一-使用-report-report-json等包分析" tabindex="-1"><a class="header-anchor" href="#一-使用-report-report-json等包分析" aria-hidden="true">#</a> 一，使用--report，--report-json等包分析</h3><blockquote><p>说明：公共vue框架的vue-cli脚手架版本已经支持包分析，不需要再安装包分析工具。</p></blockquote><p>参考代码：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build --report --report-json&quot;</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>分析结果截图：</p><img src="`+l+'" alt="image-20231129175611556" style="zoom:50%;"><h3 id="二-控制台查看资源请求" tabindex="-1"><a class="header-anchor" href="#二-控制台查看资源请求" aria-hidden="true">#</a> 二，控制台查看资源请求</h3><blockquote><p>说明：通过NetWork查看页面实际运行时的资源加载情况</p></blockquote><p>示例截图：</p><p>​ <img src="'+u+`" alt="image-20231129175946538" style="zoom:67%;"></p><h2 id="如何减少资源请求-优化加载体验" tabindex="-1"><a class="header-anchor" href="#如何减少资源请求-优化加载体验" aria-hidden="true">#</a> 如何减少资源请求，优化加载体验</h2><h3 id="一-使用gzip压缩打包资源" tabindex="-1"><a class="header-anchor" href="#一-使用gzip压缩打包资源" aria-hidden="true">#</a> 一，使用gzip压缩打包资源</h3><blockquote><p>说明：在项目中配置gzip压缩资源，可以减少网络请求资源大小，压缩后文件大小一般为原文件的30%左右。</p></blockquote><p>代码参考：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// npm安装gzip压缩工具</span>
npm i compression<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin@<span class="token number">5.0</span><span class="token number">.2</span> <span class="token operator">-</span><span class="token constant">D</span>

<span class="token comment">// vue.config.js中进行配置</span>
<span class="token comment">// 1,引入依赖包</span>
<span class="token keyword">const</span> CompressionPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;compression-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2,在configureWebpack中进行配置</span>
<span class="token function-variable function">configureWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;[path].gz[query]&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">algorithm</span><span class="token operator">:</span> <span class="token string">&quot;gzip&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span>  <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.js$|\\.html$|\\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>	<span class="token comment">// 压缩文件类型</span>
        <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span> <span class="token comment">// 只有大小大于该值的资源会被处理 10240</span>
        <span class="token literal-property property">minRatio</span><span class="token operator">:</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token comment">// 只有压缩率小于这个值的资源才会被处理</span>
        <span class="token literal-property property">deleteOriginalAssets</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 删除原文件</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// nginx配置</span>
http <span class="token punctuation">{</span>
    include       mime<span class="token punctuation">.</span>types<span class="token punctuation">;</span>
    default_type  application<span class="token operator">/</span>octet<span class="token operator">-</span>stream<span class="token punctuation">;</span>
    sendfile        on<span class="token punctuation">;</span>
    #tcp_nopush     on<span class="token punctuation">;</span>

    #keepalive_timeout  <span class="token number">0</span><span class="token punctuation">;</span>
    keepalive_timeout  <span class="token number">65</span><span class="token punctuation">;</span>

    gzip_static on<span class="token punctuation">;</span>

    server <span class="token punctuation">{</span>
        listen       <span class="token number">8462</span><span class="token punctuation">;</span>
        server_name  localhost<span class="token punctuation">;</span>

        location <span class="token operator">/</span> <span class="token punctuation">{</span>
            root   dist<span class="token punctuation">;</span>
            index  index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        error_page   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  <span class="token operator">/</span>50x<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
        location <span class="token operator">=</span> <span class="token operator">/</span>50x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>
            root   html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>压缩js参考截图：</p><p><img src="`+r+'" alt="企业微信截图_17012262401403"></p><p>网络请求截图：</p><p><img src="'+k+`" alt="企业微信截图_17012527676451"></p><h3 id="二-路由懒加载" tabindex="-1"><a class="header-anchor" href="#二-路由懒加载" aria-hidden="true">#</a> 二，路由懒加载</h3><blockquote><p>说明：路由懒加载可以设置成切换路由时才请求页面资源，对于较大的项目是必要的</p></blockquote><p>代码参考：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>  <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/home&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;../home.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>	<span class="token comment">// import导入的路由模块会被脚手架解析成单独模块</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="三-element-plus等ui框架优化" tabindex="-1"><a class="header-anchor" href="#三-element-plus等ui框架优化" aria-hidden="true">#</a> 三，element-plus等UI框架优化</h3><blockquote><p>说明：ui框架也是项目中资源大小占较大的模块，对于越轻量的项目越有必要优化</p></blockquote><p>1，element-plus按需引入</p><blockquote><p>说明：通过配置项自动解析element-plus使用的资源</p></blockquote><p>代码参考：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 依赖安装</span>
npm install unplugin<span class="token operator">-</span>auto<span class="token operator">-</span><span class="token keyword">import</span>@<span class="token number">0.8</span><span class="token number">.8</span> <span class="token operator">-</span><span class="token constant">D</span>
npm install unplugin<span class="token operator">-</span>vue<span class="token operator">-</span>components@<span class="token number">0.20</span><span class="token number">.1</span> <span class="token operator">-</span><span class="token constant">D</span>

<span class="token comment">// vue.config配置</span>
<span class="token literal-property property">configureWebpack</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
  
<span class="token comment">// main.js中去掉ElementPlus的注册资源</span>
<span class="token comment">// import ElementPlus from &#39;element-plus&#39;</span>
<span class="token comment">// import &#39;element-plus/dist/index.css&#39;</span>
<span class="token comment">// .use(ElementPlus)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对比参考截图：</p><p><img src="`+d+`" alt="企业微信截图_17013111477460"></p><p>2，element-plus独立成三方资源</p><blockquote><p>说明：element-plus拆分成三方资源后放置cdn可以减小项目当前服务器的压力，拆分成三方资源后能享受到浏览器缓存</p></blockquote><p>代码说明：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// main.js中去掉ElementPlus的注册资源</span>
<span class="token comment">// package.js中去掉element-plus的依赖</span>
<span class="token comment">// index.js中引用element-plus资源</span>
<span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">&quot;stylesheet&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;https://viewertest.tuzhitong.com/ndsource/element-plus-2.3.5.min.css&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://viewertest.tuzhitong.com/ndsource/element-plus-2.3.5.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="四-vue相关资源分离出项目" tabindex="-1"><a class="header-anchor" href="#四-vue相关资源分离出项目" aria-hidden="true">#</a> 四，vue相关资源分离出项目</h3><blockquote><p>说明：在项目中可以将vue，vuex，vueRouter分离出项目包，作为三方资源在index.js中引入</p></blockquote><p>代码参考：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// vue.config.js中进行配置</span>
<span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  config<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;externals&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 设置vue相关资源分离出项目</span>
    <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;vue&#39;</span><span class="token operator">:</span> <span class="token string">&#39;Vue&#39;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;vue-router&#39;</span><span class="token operator">:</span> <span class="token string">&#39;VueRouter&#39;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;vuex&#39;</span><span class="token operator">:</span> <span class="token string">&#39;Vuex&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="五-其它三方资源分离出项目" tabindex="-1"><a class="header-anchor" href="#五-其它三方资源分离出项目" aria-hidden="true">#</a> 五，其它三方资源分离出项目</h3><blockquote><p>说明：在项目中去除依赖包，在index或对应组件中进行动态加载</p></blockquote><p>参考代码：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// index.js中进行引用示例:</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://viewertest.tuzhitong.com/ndsource/html2canvas-1.4.1.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token comment">// 代码动态创建script标签引入js，参考方法：</span>
<span class="token keyword">function</span> <span class="token function">seriesLoadScripts</span><span class="token punctuation">(</span><span class="token parameter">scripts<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>	<span class="token comment">// 动态引入js资源</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> scripts <span class="token operator">!=</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token keyword">var</span> scripts <span class="token operator">=</span> <span class="token punctuation">[</span>scripts<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">HEAD</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;head&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
  <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  last <span class="token operator">=</span> scripts<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token function-variable function">recursiveLoad</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text/javascript&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>onload <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token comment">/*@cc_on!@*/</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token string">&quot;loaded&quot;</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token string">&quot;complete&quot;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> last<span class="token punctuation">)</span> <span class="token function">recursiveLoad</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;src&quot;</span><span class="token punctuation">,</span> scripts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">HEAD</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">recursiveLoad</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">seriesLoadScripts</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;https://viewertest.tuzhitong.com/ndsource/html2canvas-1.4.1.min.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;资源加载完成&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>package.js中去掉依赖，参考截图：</p><p><img src="`+v+'" alt="企业微信截图_17013098387060"></p><h3 id="六-图片优化" tabindex="-1"><a class="header-anchor" href="#六-图片优化" aria-hidden="true">#</a> 六，图片优化</h3>',48),h={href:"https://docsmall.com/image-compress",target:"_blank",rel:"noopener noreferrer"},f=n("li",null,"css绘制替换图片",-1),y=n("li",null,"v-if控制默认不显示",-1),j=a(`<h3 id="七-去除预加载、闲置加载" tabindex="-1"><a class="header-anchor" href="#七-去除预加载、闲置加载" aria-hidden="true">#</a> 七，去除预加载、闲置加载</h3><blockquote><p>说明：vue-cli可能会将资源打成预加载或闲置加载模式模式，闲置资源看link标签是否有prefetch，预加载看script标签是否有preload</p></blockquote><p>代码参考：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&#39;prefetch-index&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 去掉闲置加载</span>
  config<span class="token punctuation">.</span>optimization<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;splitChunks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 去掉自带分割功能</span>
  config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&#39;preload-index&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 去掉预加载</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>打包后index.js对比参考截图：</p><p><img src="`+m+`" alt="企业微信截图_17013100991111"></p><h3 id="八-其它优化项" tabindex="-1"><a class="header-anchor" href="#八-其它优化项" aria-hidden="true">#</a> 八，其它优化项</h3><p>1, 去除sourcemap</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// vue.config.js</span>
<span class="token literal-property property">productionSourceMap</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2，限制图片打包进js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// vue.config.js</span>
<span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> imagesRule <span class="token operator">=</span> config<span class="token punctuation">.</span>module<span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&quot;images&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  imagesRule<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loader</span><span class="token punctuation">(</span><span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">esModule</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 原配置</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3，去掉打印信息</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// vue.config.js</span>
<span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  config<span class="token punctuation">.</span>optimization<span class="token punctuation">.</span>minimizer<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>terserOptions<span class="token punctuation">.</span>compress<span class="token punctuation">.</span>drop_console <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4，白屏优化</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// index.js</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 创建loading或骨架标签 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,15);function q(_,x){const p=e("ExternalLinkIcon");return o(),c("div",null,[g,n("ul",null,[n("li",null,[s("图片压缩，压缩网站示例："),n("a",h,[s("https://docsmall.com/image-compress"),i(p)])]),f,y]),j])}const z=t(b,[["render",q],["__file","前端首页优化.html.vue"]]);export{z as default};
